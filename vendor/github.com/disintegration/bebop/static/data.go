// Generated by "go run gen.go". DO NOT EDIT.

package static

var fs = embeddedFilesystem{
	"/frontend/css/bebop.css":              &fileData{name: "bebop.css", mtime: 1493925590, size: 3926, body: []byte("body { padding-top: 55px; font-family: Arial, Helvetica, sans-serif; color: #222; }\r\na { color: #375eab; }\r\nh1 { margin: 12px 5px; font-size: 2.4rem; color: #333; }\r\nh2 { margin: 11px 5px; font-size: 2.2rem; color: #333; }\r\nh3 { margin: 10px 5px; font-size: 2.0rem; color: #333; }\r\n\r\n.container { max-width: 800px; }\r\n.content-container { padding: 0 5px; }\r\n\r\n.navbar-default { background-color: #e0ebf5; border-bottom: #d0dbe5 1px solid; }\r\n.navbar-sign-in { padding: 15px 5px !important; color: #333 !important; }\r\n.navbar-user { padding: 8px 15px !important; }\r\n.navbar-title { color: #000; letter-spacing: 2px; }\r\n.nav>li>a:focus, .nav>li>a:hover, .nav .open>a, .nav .open>a:focus, .nav .open>a:hover { background-color: #d0dbe5; }\r\n\r\n.avatar-block { display: block; padding:5px; }\r\n.avatar-block-l { display: table-cell; vertical-align: middle; }\r\n.avatar-block-r { display: table-cell; padding-left: 10px; vertical-align: middle; }\r\n\r\n.icon-s { width:15px; padding-right: 5px; }\r\n.loading-info { text-align: center; padding: 50px 0; }\r\n.info-separator { padding: 0 3px; }\r\n.btn-fix { min-width: 36px; }\r\n\r\n.card { background-color: #fff; border-top: #ccc 1px dashed; }\r\n\r\n.topics-topic { margin: 2px 0; padding: 2px 0; }\r\n.topics-topic-title { font-size: 1.5rem; padding-left: 5px;}\r\n.topics-topic-info { font-size: 1.2rem; color: #777; padding-left: 5px; margin-top: 2px; }\r\n.topics-topic-admin-tools { padding-left: 5px; font-size: 1.2rem; color: #d55; margin-top: 2px; }\r\n.topics-topic-admin-tools a { color: #d55; }\r\n.topics-topic-admin-tools a:hover { color: #f55; text-decoration: none; }\r\n.topics-topic-top-buttons { margin: 10px 5px; }\r\n\r\n.comments-comment { margin: 5px 0; padding: 5px 0; }\r\n.comments-comment-author { font-size: 1.4rem; color: #333; }\r\n.comments-comment-date { font-size: 1.2rem; color: #777; }\r\n.comments-comment-content { padding: 10px 5px 0 5px; overflow-x: auto; font-size: 1.5rem; }\r\n.comments-comment-admin-tools {padding-left: 5px; font-size: 1.2rem; color: #d55; margin-top: 4px; }\r\n.comments-comment-admin-tools a { color: #d55; }\r\n.comments-comment-admin-tools a:hover { color: #f55; text-decoration: none; }\r\n.comments-comment-new { margin: 15px 5px; }\r\n\r\n.comments-comment-content h1, .md-preview h1 { font-size: 2.2rem; color: #333; margin: 10px 0; }\r\n.comments-comment-content h2, .md-preview h2 { font-size: 2.1rem; color: #333; margin: 10px 0; }\r\n.comments-comment-content h3, .md-preview h3 { font-size: 2.0rem; color: #333; margin: 10px 0; }\r\n.comments-comment-content h4, .md-preview h4 { font-size: 1.9rem; color: #333; margin: 10px 0; }\r\n.comments-comment-content h5, .md-preview h5 { font-size: 1.8rem; color: #333; margin: 10px 0; }\r\n.comments-comment-content h6, .md-preview h6 { font-size: 1.7rem; color: #333; margin: 10px 0; }\r\n.comments-comment-content td, .md-preview td { border: #ccc 1px solid; padding: 5px; }\r\n.comments-comment-content th, .md-preview th { border: #ccc 1px solid; padding: 5px; }\r\n.comments-comment-content blockquote, .md-preview blockquote { color: #777; font-size: 1.3rem; }\r\n\r\n.user-profile { margin: 5px 0; padding: 5px; }\r\n\r\n#comment-input { height: 240px; background-color: #fff; }\r\n.md-editor { border-radius: 3px; }\r\n.md-header { border-top-left-radius: 3px; border-top-right-radius: 3px; }\r\ntextarea.md-input { border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; padding: 5px; }\r\n.md-preview { border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; padding: 5px; }\r\n\r\npre { \r\n    border: 0;\r\n    color: #333;\r\n    background-color: #f5f6f7;\r\n    white-space: pre;\r\n    word-wrap: normal;\r\n    word-break: normal;\r\n    overflow-x: auto;\r\n    font-size: 1.3rem;\r\n    font-family: Consolas, Menlo, monospace;\r\n}\r\ncode, pre code {\r\n    color: #333;\r\n    background-color: #f5f6f7; \r\n    font-size: 1.3rem;\r\n    font-family: Consolas, Menlo, monospace;\r\n    white-space: pre;\r\n}\r\n\r\n.pagination { margin: 10px 5px; }")},
	"/frontend/js/bebop-app.js":            &fileData{name: "bebop-app.js", mtime: 1493934732, size: 3926, body: []byte("const BEBOP_LOCAL_STORAGE_TOKEN_KEY = \"bebop_auth_token\";\r\nconst BEBOP_OAUTH_RESULT_COOKIE = \"bebop_oauth_result\";\r\n\r\nvar BebopApp = new Vue({\r\n  el: \"#app\",\r\n\r\n  template: `\r\n    <div>\r\n      <bebop-nav :config=\"config\" :auth=\"auth\"></bebop-nav>\r\n      <bebop-username-modal ref=\"usernameModal\"></bebop-username-modal>\r\n      <router-view :config=\"config\" :auth=\"auth\"></router-view>\r\n    </div>\r\n  `,\r\n\r\n  router: new VueRouter({\r\n    routes: [\r\n      { path: \"/\", component: BebopTopics },\r\n      { path: \"/p/:page\", component: BebopTopics },\r\n      { path: \"/t/:topic\", component: BebopComments },\r\n      { path: \"/t/:topic/p/:page\", component: BebopComments },\r\n      { path: \"/t/:topic/p/:page/c/:comment\", component: BebopComments },\r\n      { path: \"/new-topic\", component: BebopNewTopic },\r\n      { path: \"/new-comment/:topic\", component: BebopNewComment },\r\n      { path: \"/me\", component: BebopUser },\r\n      { path: \"/u/:user\", component: BebopUser },\r\n    ],\r\n    scrollBehavior: function(to, from, savedPosition) {\r\n      if (savedPosition) {\r\n        return savedPosition;\r\n      } else {\r\n        return { x: 0, y: 0 };\r\n      }\r\n    },\r\n  }),\r\n\r\n  data: function() {\r\n    return {\r\n      config: appConfig,\r\n      auth: {\r\n        authenticated: false,\r\n        user: {},\r\n      },\r\n    };\r\n  },\r\n\r\n  mounted: function() {\r\n    this.checkAuth();\r\n  },\r\n\r\n  methods: {\r\n    signIn: function(provider) {\r\n      window.open(\"oauth/begin/\" + provider, \"\", \"width=800,height=600\");\r\n    },\r\n\r\n    signOut: function() {\r\n      localStorage.removeItem(BEBOP_LOCAL_STORAGE_TOKEN_KEY);\r\n      Vue.http.headers.common[\"Authorization\"] = \"\";\r\n      this.auth = {\r\n        authenticated: false,\r\n        user: {},\r\n      };\r\n    },\r\n\r\n    oauthEnd: function() {\r\n      var result = this.getCookieByName(BEBOP_OAUTH_RESULT_COOKIE);\r\n      var parts = result.split(\":\");\r\n\r\n      if (parts.length !== 2) {\r\n        this.oauthError(\"Unknown\");\r\n        return;\r\n      }\r\n\r\n      if (parts[0] === \"error\") {\r\n        this.oauthError(parts[1]);\r\n        return;\r\n      }\r\n\r\n      if (parts[0] !== \"success\") {\r\n        this.oauthError(\"Unknown\");\r\n        return;\r\n      }\r\n\r\n      this.oauthSuccess(parts[1]);\r\n    },\r\n\r\n    getCookieByName: function(name) {\r\n      var value = \"; \" + document.cookie;\r\n      var parts = value.split(\"; \" + name + \"=\");\r\n      if (parts.length === 2) return parts.pop().split(\";\").shift();\r\n    },\r\n\r\n    oauthSuccess: function(token) {\r\n      localStorage.setItem(BEBOP_LOCAL_STORAGE_TOKEN_KEY, token);\r\n      this.checkAuth();\r\n    },\r\n\r\n    oauthError: function(error) {\r\n      if (error === \"UserBlocked\") {\r\n        console.log(\"oauth error: USER IS BLOCKED\");\r\n      } else {\r\n        console.log(\"oauth error: \" + error);\r\n      }\r\n      this.signOut();\r\n    },\r\n\r\n    checkAuth: function() {\r\n      var token = localStorage.getItem(BEBOP_LOCAL_STORAGE_TOKEN_KEY);\r\n      if (token) {\r\n        Vue.http.headers.common[\"Authorization\"] = \"Bearer \" + token;\r\n      }\r\n      this.getMe();\r\n    },\r\n\r\n    getMe: function() {\r\n      this.$http.get(\"api/v1/me\").then(\r\n        response => {\r\n          this.auth = {\r\n            authenticated: response.body.authenticated ? true : false,\r\n            user: response.body.authenticated ? response.body.user : {},\r\n          };\r\n          if (this.auth.authenticated && this.auth.user.name === \"\") {\r\n            this.setMyName();\r\n          }\r\n        },\r\n        response => {\r\n          console.log(\"ERROR: getMe: \" + JSON.stringify(response.body));\r\n          if (response.status === 401) {\r\n            this.signOut();\r\n          }\r\n        }\r\n      );\r\n    },\r\n\r\n    setMyName: function() {\r\n      this.$refs.usernameModal.show(this.auth.user.id, \"\", success => {\r\n        if (!success) {\r\n          this.signOut();\r\n        }\r\n        this.getMe();\r\n      });\r\n    },\r\n  },\r\n});\r\n\r\nfunction bebopOAuthEnd() {\r\n  BebopApp.oauthEnd();\r\n}\r\n")},
	"/frontend/js/bebop-comments.js":       &fileData{name: "bebop-comments.js", mtime: 1493934809, size: 8020, body: []byte("const COMMENTS_PER_PAGE = 20;\r\n\r\nvar BebopComments = Vue.component(\"bebop-comments\", {\r\n  template: `\r\n    <div class=\"container content-container\">\r\n\r\n      <div v-if=\"!dataReady\" class=\"loading-info\">\r\n        <div v-if=\"error\" >\r\n          <p class=\"text-danger\">\r\n            Sorry, could not load that topic. Please check your connection.\r\n          </p>\r\n          <a class=\"btn btn-primary btn-sm\" role=\"button\" @click=\"load\">\r\n            <i class=\"fa fa-refresh\"></i> Try Again\r\n          </a>\r\n        </div>\r\n        <div v-else>\r\n          <i class=\"fa fa-circle-o-notch fa-spin fa-3x fa-fw\"></i>\r\n        </div>\r\n      </div>\r\n      <div v-else>\r\n\r\n        <h2>{{topic.title}}</h2>\r\n\r\n        <nav v-if=\"lastPage > 1\">\r\n          <ul class=\"pagination pagination-sm\">\r\n            <li v-for=\"p in pagination\" :class=\"{active: page === p}\">\r\n              <span v-if=\"p === '...'\">\u2026</span>\r\n              <router-link v-if=\"p !== '...'\" :to=\"'/t/' + topicId + '/p/' + p\">{{p}}</router-link>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n\r\n        <div v-for=\"comment in comments\" class=\"card comments-comment\" :id=\"'comment-' + comment.id\">\r\n\r\n          <div class=\"avatar-block\">\r\n            <div class=\"avatar-block-l\">\r\n              <img v-if=\"users[comment.authorId].avatar\" class=\"img-circle\" :src=\"users[comment.authorId].avatar\" width=\"35\" height=\"35\"> \r\n              <img v-else class=\"img-circle\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\" width=\"35\" height=\"35\"> \r\n            </div>\r\n            <div class=\"avatar-block-r\">\r\n              <div class=\"comments-comment-author\">{{users[comment.authorId].name}}</div>\r\n              <div class=\"comments-comment-date\">\r\n                commented <span :title=\"comment.createdAt|formatTime\">{{comment.createdAt|formatTimeAgo}}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"comments-comment-content\" v-html=\"comment.content\">\r\n          </div>\r\n\r\n          <div v-if=\"auth.authenticated && auth.user.admin\" class=\"comments-comment-admin-tools\">\r\n            <a v-if=\"topic.commentCount > 1\" class=\"a-tool\" role=\"button\" @click=\"delComment(comment.id)\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i> delete comment</a>\r\n            <span v-if=\"topic.commentCount > 1\" class=\"info-separator\"> | </span>\r\n            <router-link :to=\"'/u/' + users[comment.authorId].id\" class=\"a-tool\"><i class=\"fa fa-user\" aria-hidden=\"true\"></i> user profile</router-link>\r\n          </div>\r\n        \r\n        </div>\r\n\r\n        <div v-if=\"auth.authenticated && page === lastPage\" class=\"comments-comment-new\">\r\n          <router-link :to=\"'/new-comment/' + topicId\" class=\"btn btn-primary btn-sm\">\r\n            <i class=\"fa fa-reply\" aria-hidden=\"true\"></i>\r\n            Reply\r\n          </router-link>\r\n        </div>\r\n\r\n        <nav v-if=\"lastPage > 1\">\r\n          <ul class=\"pagination pagination-sm\">\r\n            <li v-for=\"p in pagination\" :class=\"{active: page === p}\">\r\n              <span v-if=\"p === '...'\">\u2026</span>\r\n              <router-link v-if=\"p !== '...'\" :to=\"'/t/' + topicId + '/p/' + p\">{{p}}</router-link>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  `,\r\n\r\n  props: [\"config\", \"auth\"],\r\n\r\n  data: function() {\r\n    return {\r\n      topic: {},\r\n      topicReady: false,\r\n      comments: [],\r\n      commentCount: 0,\r\n      commentsReady: false,\r\n      users: {},\r\n      usersReady: false,\r\n      error: false,\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    dataReady: function() {\r\n      return this.topicReady && this.commentsReady && this.usersReady;\r\n    },\r\n\r\n    topicId: function() {\r\n      var topicId = parseInt(this.$route.params.topic, 10);\r\n      if (!topicId) {\r\n        return 0;\r\n      }\r\n      return topicId;\r\n    },\r\n\r\n    page: function() {\r\n      var page = parseInt(this.$route.params.page, 10);\r\n      if (!page || page < 1) {\r\n        return 1;\r\n      }\r\n      return page;\r\n    },\r\n\r\n    lastPage: function() {\r\n      if (!this.commentsReady) {\r\n        return 1;\r\n      }\r\n      var p = Math.floor((this.commentCount - 1) / COMMENTS_PER_PAGE) + 1;\r\n      if (p < 1) {\r\n        p = 1;\r\n      }\r\n      return p;\r\n    },\r\n\r\n    pagination: function() {\r\n      if (!this.commentsReady) {\r\n        return [];\r\n      }\r\n      return getPagination(this.page, this.lastPage);\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    page: function(val) {\r\n      this.load();\r\n    },\r\n    topicId: function(val) {\r\n      this.load();\r\n    },\r\n    dataReady: function(val) {\r\n      if (val && this.$route.params.comment) {\r\n        this.$nextTick(() => {\r\n          $(\"html, body\").animate(\r\n            {\r\n              scrollTop: $(\"#comment-\" + this.$route.params.comment).offset().top,\r\n            },\r\n            500\r\n          );\r\n        });\r\n      }\r\n    },\r\n  },\r\n\r\n  created: function() {\r\n    this.load();\r\n  },\r\n\r\n  methods: {\r\n    load: function() {\r\n      this.topic = {};\r\n      this.topicReady = false;\r\n      this.comments = [];\r\n      this.commentCount = 0;\r\n      this.commentsReady = false;\r\n      this.users = {};\r\n      this.usersReady = false;\r\n      this.waitNewComment = false;\r\n      this.error = false;\r\n      this.getTopic();\r\n      this.getComments();\r\n    },\r\n\r\n    getTopic: function() {\r\n      var url = \"api/v1/topics/\" + this.topicId;\r\n      this.$http.get(url).then(\r\n        response => {\r\n          this.topic = response.body.topic;\r\n          this.topicReady = true;\r\n        },\r\n        response => {\r\n          this.error = true;\r\n          console.log(\"ERROR: getTopic: \" + JSON.stringify(response.body));\r\n        }\r\n      );\r\n    },\r\n\r\n    getComments: function() {\r\n      var url = \"api/v1/comments?topic=\" + this.topicId + \"&limit=\" + COMMENTS_PER_PAGE;\r\n      if (this.page > 0) {\r\n        var offset = (this.page - 1) * COMMENTS_PER_PAGE;\r\n        url += \"&offset=\" + offset;\r\n      }\r\n      this.$http.get(url).then(\r\n        response => {\r\n          this.comments = response.body.comments;\r\n          this.commentCount = response.body.count;\r\n          for (var i = 0; i < this.comments.length; i++) {\r\n            this.comments[i].content = marked(this.comments[i].content, {\r\n              sanitize: true,\r\n              breaks: true,\r\n            });\r\n          }\r\n          this.commentsReady = true;\r\n\r\n          if (this.page > this.lastPage) {\r\n            this.$parent.$router.replace(\"/t/\" + this.topicId + \"/p/\" + this.lastPage);\r\n            return;\r\n          }\r\n\r\n          this.getUsers();\r\n        },\r\n        response => {\r\n          this.error = true;\r\n          console.log(\"ERROR: getComments: \" + JSON.stringify(response.body));\r\n        }\r\n      );\r\n    },\r\n\r\n    getUsers: function() {\r\n      var url = \"api/v1/users\";\r\n      var ids = [];\r\n      for (var i = 0; i < this.comments.length; i++) {\r\n        ids.push(this.comments[i].authorId);\r\n      }\r\n      ids = ids.filter((v, i, a) => a.indexOf(v) === i);\r\n      if (ids.length === 0) {\r\n        this.users = {};\r\n        this.usersReady = true;\r\n        return;\r\n      }\r\n      url += \"?ids=\" + ids.join(\",\");\r\n      this.$http.get(url).then(\r\n        response => {\r\n          var users = {};\r\n          for (var i = 0; i < response.body.users.length; i++) {\r\n            users[response.body.users[i].id] = response.body.users[i];\r\n          }\r\n          this.users = users;\r\n          this.usersReady = true;\r\n        },\r\n        response => {\r\n          this.error = true;\r\n          console.log(\"ERROR: getUsers: \" + JSON.stringify(response.body));\r\n        }\r\n      );\r\n    },\r\n\r\n    delComment: function(id) {\r\n      if (!confirm(\"Are you sure you want to delete comment \" + id + \"?\")) {\r\n        return;\r\n      }\r\n      var url = \"api/v1/comments/\" + id;\r\n      this.$http.delete(url).then(\r\n        response => {\r\n          this.load();\r\n        },\r\n        response => {\r\n          console.log(\"ERROR: delComment: \" + JSON.stringify(response.body));\r\n        }\r\n      );\r\n    },\r\n  },\r\n});\r\n")},
	"/frontend/js/bebop-init.js":           &fileData{name: "bebop-init.js", mtime: 1493934821, size: 940, body: []byte("marked.setOptions({\r\n  sanitize: true,\r\n  breaks: true,\r\n});\r\n\r\nVue.filter(\"formatTime\", function(value) {\r\n  if (value) {\r\n    return moment(String(value)).format(\"MMMM Do YYYY, hh:mm\");\r\n  }\r\n});\r\n\r\nVue.filter(\"formatTimeAgo\", function(value) {\r\n  if (value) {\r\n    return moment(String(value)).fromNow();\r\n  }\r\n});\r\n\r\nVue.filter(\"capitalize\", function(value) {\r\n  if (value) {\r\n    value = String(value);\r\n    return value[0].toUpperCase() + value.slice(1);\r\n  }\r\n});\r\n\r\nfunction getPagination(curPage, lastPage) {\r\n  var pagination = [];\r\n  var lr = 2;\r\n\r\n  pagination.push(1);\r\n\r\n  if (curPage - lr > 2) {\r\n    pagination.push(\"...\");\r\n  }\r\n\r\n  for (var p = curPage - lr; p <= curPage + lr; p++) {\r\n    if (p > 1 && p < lastPage) {\r\n      pagination.push(p);\r\n    }\r\n  }\r\n\r\n  if (curPage + lr < lastPage - 1) {\r\n    pagination.push(\"...\");\r\n  }\r\n\r\n  if (lastPage > 1) {\r\n    pagination.push(lastPage);\r\n  }\r\n\r\n  return pagination;\r\n}\r\n")},
	"/frontend/js/bebop-nav.js":            &fileData{name: "bebop-nav.js", mtime: 1493934826, size: 2436, body: []byte("Vue.component(\"bebop-nav\", {\r\n  template: `\r\n    <nav class=\"navbar navbar-default navbar-fixed-top\">\r\n      <div class=\"container\">\r\n        <div class=\"navbar-header pull-left\">\r\n          <router-link to=\"/\" class=\"navbar-brand\">\r\n            <span class=\"navbar-title\">\r\n              <i class=\"fa fa-comments\"></i>\r\n              {{ config.title }}\r\n            </span>\r\n          </router-link>\r\n        </div>\r\n        <div class=\"navbar-header pull-right\">\r\n          <ul class=\"nav pull-left\">\r\n            <li v-if=\"auth.authenticated\">\r\n              <a class=\"navbar-link dropdown-toggle navbar-user\" role=\"button\" data-toggle=\"dropdown\" :title=\"auth.user.name\">\r\n                <img v-if=\"auth.user.avatar\" class=\"img-circle\" :src=\"auth.user.avatar\" width=\"35\" height=\"35\"> \r\n                <img v-else class=\"img-circle\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\" width=\"35\" height=\"35\"> \r\n                <span class=\"caret\"></span>\r\n              </a>\r\n              <ul class=\"dropdown-menu pull-right\">\r\n                <li>\r\n                  <router-link to=\"/me\">\r\n                    <i class=\"fa fa-user icon-s\"></i>\r\n                    {{auth.user.name}}\r\n                  </router-link>\r\n                </li>\r\n                <li role=\"separator\" class=\"divider\"></li>\r\n                <li>\r\n                  <a href=\"#\" @click.prevent=\"$parent.signOut()\">\r\n                    <i class=\"fa fa-sign-out icon-s\"></i>\r\n                    Sign out\r\n                  </a>\r\n                </li>\r\n              </ul>\r\n            </li>\r\n            <li v-else>\r\n              <a class=\"navbar-link dropdown-toggle navbar-sign-in\" href=\"#\" data-toggle=\"dropdown\">\r\n                <i class=\"fa fa-user icon-s\"></i>\r\n                Sign In / Up \r\n                <span class=\"caret\"></span>\r\n              </a>\r\n              <ul class=\"dropdown-menu pull-right\">\r\n                <li v-for=\"provider in config.oauth\">\r\n                  <a href=\"#\" @click.prevent=\"$parent.signIn(provider)\">\r\n                    <i :class=\"'icon-s fa fa-' + provider\" aria-hidden=\"true\"></i>\r\n                    with {{provider|capitalize}}\r\n                  </a>\r\n                </li>\r\n              </ul>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  `,\r\n\r\n  props: [\"config\", \"auth\"],\r\n\r\n  data: function() {\r\n    return {};\r\n  },\r\n});\r\n")},
	"/frontend/js/bebop-new-comment.js":    &fileData{name: "bebop-new-comment.js", mtime: 1493934836, size: 2311, body: []byte("var BebopNewComment = Vue.component(\"bebop-new-comment\", {\r\n  template: `\r\n    <div class=\"container content-container\">\r\n      <h2>New Comment</h2>\r\n      <div>\r\n        <div class=\"form-group\">\r\n          <label for=\"user-name\" class=\"form-control-label\">Comment:</label>\r\n          <textarea class=\"form-control\" id=\"comment-input\" @change=\"hideErrorMessage\" @keyup=\"hideErrorMessage\" maxlength=\"10000\"></textarea>\r\n        </div>\r\n        <div id=\"form-error\" class=\"alert alert-danger\" :class=\"{hidden: errorMessage===''}\" role=\"alert\" style=\"cursor:pointer\" @click=\"hideErrorMessage\">\r\n          {{errorMessage}}\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <button type=\"button\" class=\"btn btn-primary btn-sm\" @click=\"postComment\" :disabled=\"posting\">\r\n          <i class=\"fa fa-reply\"></i> Reply\r\n        </button>\r\n      </div>\r\n    </div>\r\n  `,\r\n\r\n  props: [\"config\", \"auth\"],\r\n\r\n  data: function() {\r\n    return {\r\n      errorMessage: \"\",\r\n      posting: false,\r\n    };\r\n  },\r\n\r\n  mounted: function() {\r\n    $(\"#comment-input\").markdown({\r\n      iconlibrary: \"fa\",\r\n      fullscreen: {\r\n        enable: false,\r\n      },\r\n    });\r\n  },\r\n\r\n  methods: {\r\n    postComment: function() {\r\n      var topicId = parseInt(this.$route.params.topic, 10);\r\n      var comment = $(\"#comment-input\").val().trim();\r\n      if (comment.length < 1 || comment.length > 10000) {\r\n        this.showErrorMessage(\"Invalid comment\");\r\n        return;\r\n      }\r\n      this.posting = true;\r\n      this.$http\r\n        .post(\"api/v1/comments\", {\r\n          topic: topicId,\r\n          content: comment,\r\n        })\r\n        .then(\r\n          response => {\r\n            var id = response.data.id;\r\n            var page = Math.floor((response.data.count - 1) / COMMENTS_PER_PAGE) + 1;\r\n            this.posting = false;\r\n            this.$parent.$router.push(\"/t/\" + topicId + \"/p/\" + page + /c/ + id);\r\n          },\r\n          response => {\r\n            this.posting = false;\r\n            this.showErrorMessage(\"An error occured\");\r\n            console.log(\"ERROR: postComment: \" + JSON.stringify(response.body));\r\n          }\r\n        );\r\n    },\r\n\r\n    showErrorMessage: function(message) {\r\n      this.errorMessage = message;\r\n    },\r\n\r\n    hideErrorMessage: function() {\r\n      this.errorMessage = \"\";\r\n    },\r\n  },\r\n});\r\n")},
	"/frontend/js/bebop-new-topic.js":      &fileData{name: "bebop-new-topic.js", mtime: 1493934841, size: 2557, body: []byte("var BebopNewTopic = Vue.component(\"bebop-new-topic\", {\r\n  template: `\r\n    <div class=\"container content-container\">\r\n      <h2>New Topic</h2>\r\n      <div>\r\n        <div class=\"form-group\">\r\n          <label for=\"user-name\" class=\"form-control-label\">Title:</label>\r\n          <input type=\"text\" class=\"form-control\" id=\"topic-title-input\" @change=\"hideErrorMessage\" @keyup=\"hideErrorMessage\" maxlength=\"100\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"user-name\" class=\"form-control-label\">Comment:</label>\r\n          <textarea class=\"form-control\" id=\"comment-input\" @change=\"hideErrorMessage\" @keyup=\"hideErrorMessage\" maxlength=\"10000\"></textarea>\r\n        </div>\r\n        <div id=\"form-error\" class=\"alert alert-danger\" :class=\"{hidden: errorMessage===''}\" role=\"alert\" style=\"cursor:pointer\" @click=\"hideErrorMessage\">\r\n          {{errorMessage}}\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <button type=\"button\" class=\"btn btn-primary btn-sm\" @click=\"postTopic\" :disabled=\"posting\">\r\n          <i class=\"fa fa-plus\"></i> Create Topic\r\n        </button>\r\n      </div>\r\n    </div>\r\n  `,\r\n\r\n  props: [\"config\", \"auth\"],\r\n\r\n  data: function() {\r\n    return {\r\n      errorMessage: \"\",\r\n      posting: false,\r\n    };\r\n  },\r\n\r\n  mounted: function() {\r\n    $(\"#comment-input\").markdown({\r\n      iconlibrary: \"fa\",\r\n      fullscreen: {\r\n        enable: false,\r\n      },\r\n    });\r\n  },\r\n\r\n  methods: {\r\n    postTopic: function() {\r\n      var title = $(\"#topic-title-input\").val().trim();\r\n      if (title.length < 1 || title.length > 100) {\r\n        this.showErrorMessage(\"Invalid topic title\");\r\n        return;\r\n      }\r\n      var comment = $(\"#comment-input\").val().trim();\r\n      if (comment.length < 1 || comment.length > 10000) {\r\n        this.showErrorMessage(\"Invalid comment\");\r\n        return;\r\n      }\r\n      this.posting = true;\r\n      this.$http\r\n        .post(\"api/v1/topics\", {\r\n          title: title,\r\n          content: comment,\r\n        })\r\n        .then(\r\n          response => {\r\n            this.posting = false;\r\n            this.$parent.$router.push(\"/t/\" + response.data.id);\r\n          },\r\n          response => {\r\n            this.posting = false;\r\n            this.showErrorMessage(\"An error occured\");\r\n            console.log(\"ERROR: postTopic: \" + JSON.stringify(response.body));\r\n          }\r\n        );\r\n    },\r\n\r\n    showErrorMessage: function(message) {\r\n      this.errorMessage = message;\r\n    },\r\n\r\n    hideErrorMessage: function() {\r\n      this.errorMessage = \"\";\r\n    },\r\n  },\r\n});\r\n")},
	"/frontend/js/bebop-topics.js":         &fileData{name: "bebop-topics.js", mtime: 1493934849, size: 6707, body: []byte("const TOPICS_PER_PAGE = 20;\r\n\r\nvar BebopTopics = Vue.component(\"bebop-topics\", {\r\n  template: `\r\n    <div class=\"container content-container\">\r\n\r\n      <div v-if=\"!dataReady\" class=\"loading-info\">\r\n        <div v-if=\"error\" >\r\n          <p class=\"text-danger\">\r\n            Sorry, could not load topics. Please check your connection.\r\n          </p>\r\n          <a class=\"btn btn-primary btn-sm\" role=\"button\" @click=\"load\">\r\n            <i class=\"fa fa-refresh\"></i> Try Again\r\n          </a>\r\n        </div>\r\n        <div v-else>\r\n          <i class=\"fa fa-circle-o-notch fa-spin fa-3x fa-fw\"></i>\r\n        </div>\r\n      </div>\r\n      <div v-else>\r\n\r\n        <div class=\"topics-topic-top-buttons\">\r\n          <router-link v-if=\"auth.authenticated\" to=\"/new-topic\" class=\"btn btn-primary btn-sm\">\r\n            <i class=\"fa fa-plus\"></i> New Topic\r\n          </router-link>\r\n          <a class=\"btn btn-primary btn-sm\" role=\"button\" @click=\"load\">\r\n            <i class=\"fa fa-refresh\"></i> Refresh\r\n          </a>\r\n        </div>\r\n\r\n        <nav v-if=\"page > 1\">\r\n          <ul class=\"pagination pagination-sm\">\r\n            <li v-for=\"p in pagination\" :class=\"{active: page === p}\">\r\n              <span v-if=\"p === '...'\">\u2026</span>\r\n              <router-link v-if=\"p !== '...'\" :to=\"'/p/' + p\">{{p}}</router-link>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n\r\n        <div v-for=\"topic in topics\" class=\"card topics-topic\">\r\n          <div class=\"avatar-block\">\r\n            <div class=\"avatar-block-l\">\r\n              <img v-if=\"users[topic.authorId].avatar\" class=\"img-circle\" :src=\"users[topic.authorId].avatar\" width=\"40\" height=\"40\"> \r\n              <img v-else class=\"img-circle\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\" width=\"40\" height=\"40\"> \r\n            </div>\r\n            <div class=\"avatar-block-r\">\r\n              <div class=\"topics-topic-title\">\r\n                <router-link :to=\"'/t/' + topic.id\">{{topic.title}}</router-link>\r\n              </div>\r\n              <div class=\"topics-topic-info\">\r\n                <i class=\"fa fa-user-o\"></i> {{users[topic.authorId].name}}\r\n                <span class=\"info-separator\"> | </span>\r\n                <i class=\"fa fa-comment-o\"></i> {{topic.commentCount}}\r\n                <span class=\"info-separator\"> | </span>\r\n                <i class=\"fa fa-clock-o\"></i> <span :title=\"topic.lastCommentAt|formatTime\">{{topic.lastCommentAt|formatTimeAgo}}</span>\r\n              </div>\r\n              <div class=\"topics-topic-admin-tools\" v-if=\"auth.authenticated && auth.user.admin\">\r\n                <a class=\"a-tool\" role=\"button\" @click=\"delTopic(topic.id)\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i> delete topic</a>\r\n                <span class=\"info-separator\"> | </span> \r\n                <router-link :to=\"'/u/' + users[topic.authorId].id\" class=\"a-tool\"><i class=\"fa fa-user\" aria-hidden=\"true\"></i> user profile</router-link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <nav v-if=\"lastPage > 1\">\r\n          <ul class=\"pagination pagination-sm\">\r\n            <li v-for=\"p in pagination\" :class=\"{active: page === p}\">\r\n              <span v-if=\"p === '...'\">\u2026</span>\r\n              <router-link v-if=\"p !== '...'\" :to=\"'/p/' + p\">{{p}}</router-link>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  `,\r\n\r\n  props: [\"config\", \"auth\"],\r\n\r\n  data: function() {\r\n    return {\r\n      topics: [],\r\n      topicsReady: false,\r\n      topicCount: 0,\r\n      users: {},\r\n      usersReady: false,\r\n      error: false,\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    dataReady: function() {\r\n      return this.topicsReady && this.usersReady;\r\n    },\r\n\r\n    page: function() {\r\n      var page = parseInt(this.$route.params.page, 10);\r\n      if (!page || page < 1) {\r\n        return 1;\r\n      }\r\n      return page;\r\n    },\r\n\r\n    lastPage: function() {\r\n      if (!this.topicsReady) {\r\n        return 1;\r\n      }\r\n      var p = Math.floor((this.topicCount - 1) / TOPICS_PER_PAGE) + 1;\r\n      if (p < 1) {\r\n        p = 1;\r\n      }\r\n      return p;\r\n    },\r\n\r\n    pagination: function() {\r\n      if (!this.topicsReady) {\r\n        return [];\r\n      }\r\n      return getPagination(this.page, this.lastPage);\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    page: function(val) {\r\n      this.load();\r\n    },\r\n  },\r\n\r\n  created: function() {\r\n    this.load();\r\n  },\r\n\r\n  methods: {\r\n    load: function() {\r\n      this.topics = [];\r\n      this.topicsReady = false;\r\n      this.topicCount = 0;\r\n      this.users = {};\r\n      this.usersReady = false;\r\n      this.error = false;\r\n      this.getTopics();\r\n    },\r\n\r\n    getTopics: function() {\r\n      var url = \"api/v1/topics?limit=\" + TOPICS_PER_PAGE;\r\n      if (this.page > 1) {\r\n        var offset = (this.page - 1) * TOPICS_PER_PAGE;\r\n        url += \"&offset=\" + offset;\r\n      }\r\n      this.$http.get(url).then(\r\n        response => {\r\n          this.topics = response.body.topics;\r\n          this.topicCount = response.body.count;\r\n          this.topicsReady = true;\r\n\r\n          if (this.page > this.lastPage) {\r\n            this.$parent.$router.replace(\"/p/\" + this.lastPage);\r\n            return;\r\n          }\r\n\r\n          this.getUsers();\r\n        },\r\n        response => {\r\n          this.error = true;\r\n          console.log(\"ERROR: getTopics: \" + JSON.stringify(response.body));\r\n        }\r\n      );\r\n    },\r\n\r\n    getUsers: function() {\r\n      var url = \"api/v1/users\";\r\n      var ids = [];\r\n      for (var i = 0; i < this.topics.length; i++) {\r\n        ids.push(this.topics[i].authorId);\r\n      }\r\n      ids = ids.filter((v, i, a) => a.indexOf(v) === i);\r\n      if (ids.length === 0) {\r\n        this.users = {};\r\n        this.usersReady = true;\r\n        return;\r\n      }\r\n      url += \"?ids=\" + ids.join(\",\");\r\n      this.$http.get(url).then(\r\n        response => {\r\n          var users = {};\r\n          for (var i = 0; i < response.body.users.length; i++) {\r\n            users[response.body.users[i].id] = response.body.users[i];\r\n          }\r\n          this.users = users;\r\n          this.usersReady = true;\r\n        },\r\n        response => {\r\n          this.error = true;\r\n          console.log(\"ERROR: getUsers: \" + JSON.stringify(response.body));\r\n        }\r\n      );\r\n    },\r\n\r\n    delTopic: function(id) {\r\n      if (!confirm(\"Are you sure you want to delete topic \" + id + \"?\")) {\r\n        return;\r\n      }\r\n      var url = \"api/v1/topics/\" + id;\r\n      this.$http.delete(url).then(\r\n        response => {\r\n          this.load();\r\n        },\r\n        response => {\r\n          console.log(\"ERROR: delTopic: \" + JSON.stringify(response.body));\r\n        }\r\n      );\r\n    },\r\n  },\r\n});\r\n")},
	"/frontend/js/bebop-user.js":           &fileData{name: "bebop-user.js", mtime: 1493934868, size: 8068, body: []byte("var BebopUser = Vue.component(\"bebop-user\", {\r\n  template: `\r\n    <div class=\"container content-container\">\r\n\r\n      <div v-if=\"!dataReady\" class=\"loading-info\">\r\n        <div v-if=\"error\" >\r\n          <p class=\"text-danger\">\r\n            Sorry, could not load the user profile. Please check your connection.\r\n          </p>\r\n          <a class=\"btn btn-primary btn-sm\" role=\"button\" @click=\"load\">\r\n            <i class=\"fa fa-refresh\"></i> Try Again\r\n          </a>\r\n        </div>\r\n        <div v-else>\r\n          <i class=\"fa fa-circle-o-notch fa-spin fa-3x fa-fw\"></i>\r\n        </div>\r\n      </div>\r\n      <div v-else>\r\n\r\n        <h2 v-if=\"isMe\">My profile</h2>\r\n        <h2 v-else>User profile: {{user.name}}</h2>\r\n\r\n        <div class=\"card user-profile\">\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-xs-3\">\r\n              Username\r\n            </div>\r\n            <div class=\"col-xs-6\">\r\n              {{user.name}}\r\n            </div>\r\n            <div class=\"col-xs-3 text-right\">\r\n              <label class=\"btn btn-fix\" :class=\"{'btn-default': isMe, 'btn-danger': !isMe}\" role=\"button\" @click=\"changeUsername()\"><i class=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i></label>\r\n            </div>\r\n          </div>\r\n\r\n          <hr>\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-xs-3\">\r\n              Avatar\r\n            </div>\r\n            <div class=\"col-xs-6\">\r\n              <div v-if=\"uploadingAvatar\">\r\n                <i class=\"fa fa-circle-o-notch fa-spin fa-2x fa-fw\"></i>\r\n              </div>\r\n              <div v-else>\r\n                <img v-if=\"user.avatar\" class=\"img-circle\" :src=\"user.avatar\" width=\"35\" height=\"35\"> \r\n                <img v-else class=\"img-circle\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\" width=\"35\" height=\"35\"> \r\n              </div>\r\n            </div>\r\n            <div class=\"col-xs-3 text-right\">\r\n              <label for=\"avatar-upload-input\" class=\"btn btn-fix\" :class=\"{'btn-default': isMe, 'btn-danger': !isMe}\" role=\"button\">\r\n                <i class=\"fa fa-cloud-upload\"></i>\r\n              </label>\r\n              <input id=\"avatar-upload-input\" class=\"hidden\" type=\"file\" @change=\"uploadAvatar()\"/>\r\n            </div>\r\n          </div>\r\n          <div v-if=\"avatarUploadError\" class=\"row\">\r\n            <div class=\"col-xs-12\">\r\n              <div class=\"alert alert-danger\" style=\"margin-top:10px\">{{avatarUploadError}}</div>\r\n            </div>\r\n          </div>\r\n\r\n          <hr>\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-xs-3\">\r\n              Sign in with\r\n            </div>\r\n            <div class=\"col-xs-6\">\r\n              {{user.authService|capitalize}}\r\n            </div>\r\n          </div>\r\n\r\n          <hr>\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-xs-3\">\r\n              Activated\r\n            </div>\r\n            <div class=\"col-xs-6\">\r\n              {{user.createdAt|formatTime}}\r\n            </div>\r\n          </div>\r\n          \r\n          <hr v-if=\"auth.authenticated && auth.user.admin && !isMe\">\r\n\r\n          <div v-if=\"auth.authenticated && auth.user.admin && !isMe\" class=\"row\">\r\n            <div class=\"col-xs-3\">\r\n              Blocked\r\n            </div>\r\n            <div class=\"col-xs-6\">\r\n              <span v-if=\"user.blocked\" class=\"text-danger\">Yes</span>\r\n              <span v-else class=\"text-success\">No</span>\r\n            </div>\r\n            <div class=\"col-xs-3 text-right\">\r\n              <button v-if=\"user.blocked\" class=\"btn btn-danger btn-fix\" @click=\"setBlocked(false)\"><i class=\"fa fa-unlock-alt\" aria-hidden=\"true\"></i></button>\r\n              <button v-else class=\"btn btn-danger btn-fix\" @click=\"setBlocked(true)\"><i class=\"fa fa-lock\" aria-hidden=\"true\"></i></button>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  `,\r\n\r\n  props: [\"config\", \"auth\"],\r\n\r\n  data: function() {\r\n    return {\r\n      user: {},\r\n      userReady: false,\r\n      error: false,\r\n      uploadingAvatar: false,\r\n      avatarUploadError: \"\",\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    dataReady: function() {\r\n      return this.userReady;\r\n    },\r\n\r\n    userId: function() {\r\n      if (!this.auth.authenticated) {\r\n        return 0;\r\n      }\r\n\r\n      var userId = parseInt(this.$route.params.user, 10);\r\n      if (!userId) {\r\n        return this.auth.user.id;\r\n      }\r\n\r\n      return userId;\r\n    },\r\n\r\n    isMe: function() {\r\n      if (!this.auth.authenticated) {\r\n        return false;\r\n      }\r\n      return this.userId === this.auth.user.id;\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    userId: function(val) {\r\n      this.load();\r\n    },\r\n  },\r\n\r\n  created: function() {\r\n    this.load();\r\n  },\r\n\r\n  methods: {\r\n    load: function() {\r\n      this.user = {};\r\n      this.userReady = false;\r\n      this.error = false;\r\n      this.uploadingAvatar = false;\r\n      this.avatarUploadError = \"\";\r\n      this.getUser();\r\n    },\r\n\r\n    getUser: function() {\r\n      if (!this.auth.authenticated) {\r\n        this.$parent.$router.replace(\"/\");\r\n        return;\r\n      }\r\n\r\n      if (!this.auth.user.admin && this.auth.user.id !== this.userId) {\r\n        this.$parent.$router.replace(\"/me\");\r\n        return;\r\n      }\r\n\r\n      var url = \"api/v1/me\";\r\n      if (this.auth.user.id !== this.userId) {\r\n        url = \"api/v1/users/\" + this.userId;\r\n      }\r\n\r\n      this.$http.get(url).then(\r\n        response => {\r\n          this.user = response.body.user;\r\n          this.userReady = true;\r\n        },\r\n        response => {\r\n          console.log(\"ERROR: getUser: \" + JSON.stringify(response.body));\r\n          this.error = true;\r\n        }\r\n      );\r\n    },\r\n\r\n    changeUsername: function() {\r\n      if (!this.userReady) {\r\n        return;\r\n      }\r\n      this.$parent.$refs.usernameModal.show(this.userId, this.user.name, success => {\r\n        if (success) {\r\n          if (this.isMe) {\r\n            this.$parent.getMe();\r\n          }\r\n          this.load();\r\n        }\r\n      });\r\n    },\r\n\r\n    uploadAvatar: function() {\r\n      var input = document.getElementById(\"avatar-upload-input\");\r\n      var file = input.files[0];\r\n      input.value = \"\";\r\n      var reader = new FileReader();\r\n      reader.onload = () => {\r\n        var parts = reader.result.split(\";base64,\");\r\n        var imageData = \"\";\r\n        if (parts.length === 2) {\r\n          imageData = parts[1];\r\n        }\r\n        this.putUserAvatar(imageData);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    },\r\n\r\n    putUserAvatar: function(imageData) {\r\n      if (!this.userReady) {\r\n        return;\r\n      }\r\n      this.uploadingAvatar = true;\r\n      this.avatarUploadError = \"\";\r\n      this.$http.put(\"api/v1/users/\" + this.userId + \"/avatar\", { avatar: imageData }).then(\r\n        response => {\r\n          if (this.isMe) {\r\n            this.$parent.getMe();\r\n          }\r\n          this.uploadingAvatar = false;\r\n          this.load();\r\n        },\r\n        response => {\r\n          console.log(\"ERROR: putUserAvatar: \" + JSON.stringify(response.body));\r\n          this.uploadingAvatar = false;\r\n          var error = \"Sorry, could not upload that image. An error occured.\";\r\n          if (response.body.error && response.body.error.code === \"BadRequest\") {\r\n            error = \"Sorry, could not upload that image. \";\r\n            error += \"Please choose an image from 50x50 to 2000x2000 pixels in size. \";\r\n            error += \"The supported formats are JPEG, PNG, GIF, TIFF, BMP. \";\r\n            error += \"The maximum file size is 5MB.\";\r\n          }\r\n          this.avatarUploadError = error;\r\n        }\r\n      );\r\n    },\r\n\r\n    setBlocked(val) {\r\n      action = val ? \"block\" : \"unblock\";\r\n      if (!confirm(\"Are you sure you want to \" + action + \" this user?\")) {\r\n        return;\r\n      }\r\n      this.$http.put(\"api/v1/users/\" + this.userId + \"/blocked\", { blocked: val }).then(\r\n        response => {\r\n          this.load();\r\n        },\r\n        response => {\r\n          console.log(\"ERROR: setBlocked: \" + JSON.stringify(response.body));\r\n        }\r\n      );\r\n    },\r\n  },\r\n});\r\n")},
	"/frontend/js/bebop-username-modal.js": &fileData{name: "bebop-username-modal.js", mtime: 1493934883, size: 3135, body: []byte("var BebopUsernameModal = Vue.component(\"bebop-username-modal\", {\r\n  template: `\r\n    <div class=\"modal fade\" id=\"username-modal\" tabindex=\"-1\" role=\"dialog\" data-backdrop=\"static\">\r\n      <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h2 class=\"modal-title\">Username</h2>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div style=\"margin-bottom: 15px;\">\r\n              Please choose a username that is between 3 and 20 characters in length and containing only \r\n              alphanumeric characters (letters A-Z, numbers 0-9), hyphens, and underscores.\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"user-name\" class=\"form-control-label\">Username:</label>\r\n              <input type=\"text\" class=\"form-control\" id=\"username-modal-input\" v-model=\"name\" @change=\"hideErrorMessage\" @keyup=\"hideErrorMessage\" @keyup.13=\"send\">\r\n            </div>\r\n            <div id=\"username-modal-error\" class=\"alert alert-danger\" :class=\"{hidden: errorMessage===''}\" role=\"alert\" style=\"cursor:pointer\" @click=\"hideErrorMessage\">\r\n              {{errorMessage}}\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Cancel</button>\r\n            <button type=\"button\" class=\"btn btn-primary\" id=\"username-modal-ok\" @click=\"send\">OK</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `,\r\n\r\n  data: function() {\r\n    return {\r\n      userId: 0,\r\n      success: false,\r\n      callback: function() {},\r\n      name: \"\",\r\n      errorMessage: \"\",\r\n    };\r\n  },\r\n\r\n  mounted: function() {\r\n    $(\"#username-modal\").on(\"hidden.bs.modal\", () => {\r\n      this.callback(this.success);\r\n    });\r\n    $(\"#username-modal\").on(\"shown.bs.modal\", () => {\r\n      $(\"#username-modal-input\")[0].focus();\r\n    });\r\n  },\r\n\r\n  methods: {\r\n    show: function(userId, initialName, callback) {\r\n      this.userId = userId;\r\n      this.success = false;\r\n      this.callback = callback;\r\n      this.errorMessage = \"\";\r\n      this.name = initialName;\r\n      $(\"#username-modal\").modal(\"show\");\r\n    },\r\n\r\n    send: function() {\r\n      this.$http.put(\"api/v1/users/\" + this.userId + \"/name\", { name: this.name }).then(\r\n        response => {\r\n          this.success = true;\r\n          $(\"#username-modal\").modal(\"hide\");\r\n        },\r\n        response => {\r\n          if (response.data.error && response.data.error.code === \"UnavailableUserName\") {\r\n            this.showErrorMessage(\"Sorry, that username is taken.\");\r\n          } else if (response.data.error && response.data.error.code === \"InvalidUserName\") {\r\n            this.showErrorMessage(\"Invalid username.\");\r\n          } else {\r\n            this.showErrorMessage(\"An error occured.\");\r\n          }\r\n          $(\"#username-modal-input\")[0].focus();\r\n        }\r\n      );\r\n    },\r\n\r\n    showErrorMessage: function(message) {\r\n      this.errorMessage = message;\r\n    },\r\n\r\n    hideErrorMessage: function() {\r\n      this.errorMessage = \"\";\r\n    },\r\n  },\r\n});\r\n")},
}
